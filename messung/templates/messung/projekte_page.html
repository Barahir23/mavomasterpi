{% extends "layout.html" %}
{% load static %}
{% block title %}Projekte – MavoMaster{% endblock %}
{% block sidebar_context %}
  <div class="card"><h3>Bearbeiten</h3><p>Wähle ein Projekt oder Objekt zum Bearbeiten.</p></div>
{% endblock %}
{% block content %}
  <div id="projekt-list">
    {% for projekt in projekte %}
      <div class="projekt-block">
        <section class="card projekt-card has-delete" data-projekt-id="{{ projekt.id }}">
          <h3>{{ projekt.code }} {{ projekt.name }}</h3>
          <button class="edit-btn projekt-edit" data-projekt-id="{{ projekt.id }}" title="Projekt bearbeiten">
            <span class="icon">{% include "icons/pencil-square.svg" %}</span>
          </button>
          <button class="delete-btn projekt-delete" data-projekt-id="{{ projekt.id }}" title="Projekt löschen">
            <span class="icon">{% include "icons/trash.svg" %}</span>
          </button>
        </section>
        <div class="objekte-container" data-projekt-id="{{ projekt.id }}" style="display:none;"></div>
      </div>
    {% empty %}
      <section class="card"><p>Keine Projekte vorhanden.</p></section>
    {% endfor %}
  </div>

  <template id="objekt-template">
    <section class="card card-sub objekt-card has-delete" data-objekt-id="">
      <h3 class="objekt-name"></h3>
      <button class="edit-btn objekt-edit" data-objekt-id="" title="Objekt bearbeiten">
        <span class="icon">{% include "icons/pencil-square.svg" %}</span>
      </button>
      <button class="delete-btn objekt-delete" data-objekt-id="" title="Objekt löschen">
        <span class="icon">{% include "icons/trash.svg" %}</span>
      </button>
    </section>
  </template>
{% endblock %}
{% block extra_js %}
  <script src="{% static 'js/projekte.js' %}"></script>
{% endblock %}
