{% extends "layout.html" %}
{% block title %}Projekte – MavoMaster{% endblock %}
{% block sidebar_context %}
  {% include "messung/projek_edit.html" %}
{% endblock %}
{% block content %}
  <div id="projekt-list">
    {% for projekt in projekte %}
      <div class="projekt-block">
        <section class="card projekt-card">
          <h3>{{ projekt.code }} {{ projekt.name }}</h3>
          <a href="{% url 'projekt_edit' projekt.id %}" title="Projekt bearbeiten" class="mm-btn mm-btn--small">Bearbeiten</a>
          <form method="post" action="{% url 'projekt_delete' projekt.id %}" style="display:inline;">
            {% csrf_token %}
            <button type="submit" class="mm-btn mm-btn--danger mm-btn--small">Löschen</button>
          </form>
        </section>
        {% for objekt in projekt.objekte.all %}
          <section class="card card-sub objekt-card">
            <h4>{{ objekt.name }}</h4>
            <a href="{% url 'objekt_edit' objekt.id %}" class="mm-btn mm-btn--small">Bearbeiten</a>
            <form method="post" action="{% url 'objekt_delete' objekt.id %}" style="display:inline;">
              {% csrf_token %}
              <button type="submit" class="mm-btn mm-btn--danger mm-btn--small">Löschen</button>
            </form>
          </section>
        {% empty %}
          <section class="card card-sub"><p>Keine Objekte vorhanden.</p></section>
        {% endfor %}
        <section class="card card-sub">
          <a href="{% url 'objekt_add' projekt.id %}" class="mm-btn">Objekt hinzufügen</a>
        </section>
      </div>
    {% empty %}
      <section class="card"><p>Keine Projekte vorhanden.</p></section>
    {% endfor %}
    <section class="card"><a href="{% url 'projekt_add' %}" class="mm-btn">Projekt hinzufügen</a></section>
  </div>
{% endblock %}
