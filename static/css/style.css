
:root {
  --color-background: #1c1c1c;
  --color-surface: #242424;
  --color-border: #3a3a3a;
  --color-text: #f0f0f0;
  /* Primary palette */
  --primary-900: #f39200;
  --primary-800: #f6a02b;
  --primary-700: #f8ae4b;
  --primary-600: #fab963;
  --primary-500: #fbc27a;
  --primary-400: #fccb8e;
  --primary-300: #fcd3a2;
  --primary-200: #fddcb3;
  --primary-100: #fff0d9;

  /* Secondary palette */
  --secondary-800: #878787;
  --secondary-700: #949494;
  --secondary-600: #a3a3a3;
  --secondary-500: #b2b2b2;
  --secondary-400: #c0c0c0;
  --secondary-300: #cccccc;
  --secondary-200: #dadada;
  --secondary-100: #ebebeb;

  --primary: var(--primary-700);
  --secondary: var(--secondary-500);
  --svg-icon: var(--primary);
  --sidebar-open-w: min(600px, 100vw);
  --sidebar-collapsed-w: 50px;
  --shadow-lg: 0 20px 50px rgba(0,0,0,.4);
}

* { box-sizing: border-box; }
html, body { height: 100%; }
body {
  margin: 0;
  background: var(--color-background);
  color: var(--color-text);
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, sans-serif;
  -webkit-tap-highlight-color: transparent;
}
a { color: inherit; text-decoration: none; }

/* Sidebar */
#app-sidebar {
  position: fixed;
  left: 0; top: 0;
  width: var(--sidebar-open-w);
  height: 100dvh;
  background: var(--color-surface);
  border-right: 1px solid var(--color-border);
  z-index: 2100;
  display: flex;
  flex-direction: column;
  transition: width .25s ease;
  overflow: hidden;
  padding-bottom: env(safe-area-inset-bottom);
}
@supports not (height: 100dvh) { #app-sidebar { height: 100vh; } }
#main-content {
  margin-left: var(--sidebar-open-w);
  min-height: 100dvh;
  padding: 1rem;
  transition: margin-left .25s ease;
}

.sidebar-header {
  display: flex;
  align-items: center;
  padding: .5rem;
  border-bottom: 1px solid var(--color-border);
}
#sidebar-toggle {
  background: transparent;
  color: var(--color-text);
  border: 1px solid var(--color-border);
  border-radius: 10px;
  width: 34px; height: 34px;
  display: inline-flex; align-items: center; justify-content: center;
  cursor: pointer; touch-action: manipulation;
}
#sidebar-toggle .icon { width:20px; height:20px; display:inline-flex; }
#sidebar-toggle svg { width:20px; height:20px; display:block; stroke:var(--svg-icon); }

.sidebar-nav { display:flex; flex-direction:column; padding:.5rem; gap:.25rem; border-bottom:1px solid var(--color-border); overflow: hidden auto; }
.sidebar-context .sidebar-nav { margin:0 -.6rem; border-bottom:none; }
.nav-item { display:flex; align-items:center; gap:.6rem; padding:.45rem .6rem; border-radius:10px; min-height:36px; }
.nav-item:hover { background:#2c2c2c; }
.icon { display:inline-flex; width:20px; height:20px; align-items:center; justify-content:center; }
.icon svg { width:20px; height:20px; display:block; stroke:var(--svg-icon); }
.nav-item.icon-only { padding:.45rem; justify-content:center; }

.sidebar-context { padding:.6rem; overflow:auto; flex:1 1 auto; min-height:0; }

/* Footer: single column, left aligned */
.sidebar-footer {
  padding:.5rem; border-top:1px solid var(--color-border);
  display:grid; grid-template-columns:1fr; grid-auto-rows:40px; gap:.5rem;
  flex:0 0 auto;
}
.footer-btn {
  display:inline-flex; align-items:center; justify-content:flex-start;
  background:transparent; border:none; border-radius:10px; width:100%; height:40px; padding:0 .6rem;
  cursor:pointer; touch-action:manipulation;
}
.footer-btn .icon, .footer-btn .icon svg { width:20px; height:20px; }

/* Collapsed */
html.sidebar-collapsed #app-sidebar, body.sidebar-collapsed #app-sidebar { width: var(--sidebar-collapsed-w); }
html.sidebar-collapsed #main-content, body.sidebar-collapsed #main-content { margin-left: var(--sidebar-collapsed-w); }
html.sidebar-collapsed .label, body.sidebar-collapsed .label,
html.sidebar-collapsed .sidebar-context > *:not(.always-visible), body.sidebar-collapsed .sidebar-context > *:not(.always-visible) { display:none !important; }
html.sidebar-collapsed .sidebar-context .mm-btn, body.sidebar-collapsed .sidebar-context .mm-btn { min-width:auto; }
html.sidebar-collapsed #sidebar-toggle .open, body.sidebar-collapsed #sidebar-toggle .open { display:none; }
html.sidebar-collapsed #sidebar-toggle .closed, body.sidebar-collapsed #sidebar-toggle .closed { display:inline-flex; }
#sidebar-toggle .closed { display:none; }
html.sidebar-collapsed .nav-item, body.sidebar-collapsed .nav-item,
html.sidebar-collapsed .footer-btn, body.sidebar-collapsed .footer-btn {
  justify-content: center;
  padding-left: .45rem;
  padding-right: .45rem;
}

/* Cards */
.card { background: var(--color-surface); border:1px solid var(--color-border); border-radius:12px; padding:.75rem; position:relative; }
.card.selected { border-color: var(--primary); }
.card h2, .card h3 { color: var(--primary);  }
.card .edit-btn { position:absolute; top:.5rem; right:.5rem; background:transparent; border:none; width:28px; height:28px; border-radius:6px; display:inline-flex; align-items:center; justify-content:center; cursor:pointer; }
.card .edit-btn:hover { background:#2c2c2c; }
.card .edit-btn .icon, .card .edit-btn .icon svg { width:20px; height:20px; }
.card.card-sub { margin-left:1rem; }
.card.has-delete .edit-btn { right:2.5rem; }
.card.has-delete { padding-right:2.5rem; }
.card .delete-btn { position:absolute; top:.5rem; right:.5rem; background:transparent; border:none; width:28px; height:28px; border-radius:6px; display:inline-flex; align-items:center; justify-content:center; cursor:pointer; }
.card .delete-btn:hover { background:#2c2c2c; }
.card .delete-btn .icon, .card .delete-btn .icon svg { width:20px; height:20px; }
.element-card { margin-bottom:10px; min-height:50px; max-height:100px; height:auto; overflow:auto; }
.element-columns { display:grid; grid-template-columns:repeat(3,1fr); gap:1rem; }
.element-columns .column { overflow:auto; max-height:80vh; }

.element-card h2,
.element-card h3,
.element-card h4 {font-size: clamp(10px, 2vw, 15px); margin:0 0 .5rem;}

.projekt-card h2 { color: var(--secondary-200);}
.objekt-card h3 { color: var(--secondary-400);}
.messung-card h4 { color: var(--secondary-800);}

input, textarea, select {
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  color: var(--color-text);
  border-radius: 8px;
  padding: .4rem;
  width: 100%;
}

form p { margin:0 0 1rem; }

.form-row { display:grid; grid-template-columns:max-content 1fr; align-items:center; gap:.5rem; margin:0 0 1rem; }

.icon-btn { background:transparent; border:1px solid var(--color-border); width:28px; height:28px; border-radius:6px; display:inline-flex; align-items:center; justify-content:center; padding:0; cursor:pointer; }
.icon-btn .icon, .icon-btn .icon svg { width:20px; height:20px; }
.icon-btn:disabled {cursor:default; }
.icon-btn:disabled .icon svg { stroke: var(--secondary); }
.save-btn.unsaved { border-color: red; }

.edit-form .form-header { display:flex; justify-content:space-between; align-items:center; margin-bottom:.5rem; color: var(--primary); }
.edit-form .form-actions { display:flex; gap:.25rem; }
.accordion-body.collapsed { display:none; }
.accordion-toggle .icon svg { transition:transform .2s; }
.accordion-toggle.collapsed .icon svg { transform:rotate(180deg); }

/* Modal */
.mm-btn { display:inline-flex; align-items:center; justify-content:center;
  min-width:96px; height:38px; padding:0 .9rem; border-radius:10px; border:1px solid transparent;
  font:inherit; cursor:pointer; touch-action:manipulation; }
.mm-btn--primary { background: var(--primary); color:#111; }
.mm-btn--ghost { background: transparent; color: var(--color-text); border-color: var(--color-border); }

.mm-modal { position:fixed; inset:0; z-index:3000; display:none; padding:2rem; }
.mm-modal[aria-hidden="false"] { display:flex; align-items:center; justify-content:center; }
.mm-modal__backdrop { position:absolute; inset:0; background:#000; opacity:.5; }
.mm-modal__dialog { position:relative; max-width:420px; width:100%;
  background:var(--color-surface); border:1px solid var(--color-border); border-radius:14px; padding:1rem 1rem .9rem;
  color:var(--color-text); box-shadow: var(--shadow-lg); }
.mm-modal__title { margin:0 0 .5rem; color: var(--primary); font-size:1.1rem; }
.mm-modal__text { margin:.25rem 0 1rem; line-height:1.35; }
.mm-modal__countdown { margin-top:.75rem; font-size:.95rem; opacity:.9; }

/* Flyout */
.flyout { position: fixed; z-index: 3200; display: none; }
.flyout[aria-hidden="false"] { display:block; }
.flyout__panel {
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: 12px;
  box-shadow: var(--shadow-lg);
  position: relative;
  z-index: 1;
  width: 50px;
  min-width: 50px;
  overflow: hidden;
}
.flyout__list { list-style: none; margin: 0; padding: .35rem; }
.flyout__item { display: flex; align-items: center; justify-content: center; padding: .45rem .6rem; border-radius: 10px; cursor: pointer; }
.flyout__item .icon, .flyout__item .icon svg { cursor: pointer; }
.flyout__item .label { display: none; }
.flyout__item:hover { background: #2c2c2c; }
.flyout__separator { height: 1px; background: var(--color-border); margin: .35rem .25rem; }
.flyout__backdrop { position: fixed; inset: 0; background: transparent; }
